import{d as S,r as v,j as f,k as V,c as d,a as t,e as g,p as b,u as p,t as l,q as y,f as h,y as _,F as T,s as L,h as F,o as n}from"./index-CkTTGbTf.js";import{c as q,a as A}from"./createLucideIcon-C2Ny1EPG.js";import{H as P,T as B,a as H}from"./trending-up-B-prgq7W.js";/**
 * @license lucide-vue-next v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=q("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),U={class:"p-6"},$={class:"flex items-center justify-between mb-6"},j={class:"text-2xl font-bold text-white flex items-center gap-3"},z={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},E={class:"stat-card"},M={class:"stat-value"},N={class:"stat-card"},W={class:"stat-value text-emerald-400"},G={class:"stat-card"},I={class:"stat-value"},J={class:"text-emerald-400"},K={class:"text-red-400"},O={class:"stat-card"},Q={class:"glass-card p-4 mb-6"},X={class:"flex flex-wrap items-center gap-4"},Y={class:"flex items-center gap-2 text-dark-400"},Z=["value"],tt={class:"glass-card overflow-hidden"},st={key:0,class:"p-8 text-center text-dark-400"},et={key:1,class:"p-12 text-center text-dark-400"},at={key:2,class:"overflow-x-auto"},lt={class:"w-full"},ot={class:"divide-y divide-dark-700"},nt={class:"px-4 py-4 text-sm text-dark-300"},it={class:"px-4 py-4"},rt={class:"font-medium text-white"},dt={class:"px-4 py-4"},ut={class:"px-4 py-4 text-right font-mono text-sm text-dark-300"},pt={class:"px-4 py-4 text-right font-mono text-sm text-dark-300"},ct={class:"px-4 py-4 text-right"},gt=S({__name:"TradesView",setup(xt){const k=v(!0),m=v([]),o=v({period:"all",result:"all",symbol:"all"}),C=f(()=>[...new Set(m.value.map(s=>s.coin))].sort()),i=f(()=>{let a=[...m.value];return o.value.result==="win"?a=a.filter(s=>s.pnl>0):o.value.result==="loss"&&(a=a.filter(s=>s.pnl<0)),o.value.symbol!=="all"&&(a=a.filter(s=>s.coin===o.value.symbol)),a}),u=f(()=>{const a=i.value.filter(r=>r.pnl>0),s=i.value.filter(r=>r.pnl<0),e=i.value.reduce((r,x)=>r+x.pnl,0),c=i.value.length>0?a.length/i.value.length*100:0;return{wins:a.length,losses:s.length,totalPnL:e,winRate:c}});async function w(){try{const a=await A.get("/account/history",{params:o.value});m.value=a.data.trades||[]}catch(a){console.error("Error fetching trades:",a)}finally{k.value=!1}}function D(a){return new Date(a).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"})}return V(w),(a,s)=>(n(),d("div",U,[t("div",$,[t("div",null,[t("h2",j,[g(p(P),{class:"w-7 h-7 text-primary-400"}),s[3]||(s[3]=b(" Historique des Trades ",-1))]),s[4]||(s[4]=t("p",{class:"text-dark-400 mt-1"},"Consultez vos trades passés",-1))])]),t("div",z,[t("div",E,[s[5]||(s[5]=t("span",{class:"stat-label"},"Total Trades",-1)),t("span",M,l(i.value.length),1)]),t("div",N,[s[6]||(s[6]=t("span",{class:"stat-label"},"Win Rate",-1)),t("span",W,l(u.value.winRate.toFixed(1))+"%",1)]),t("div",G,[s[8]||(s[8]=t("span",{class:"stat-label"},"Wins / Losses",-1)),t("span",I,[t("span",J,l(u.value.wins),1),s[7]||(s[7]=t("span",{class:"text-dark-500"}," / ",-1)),t("span",K,l(u.value.losses),1)])]),t("div",O,[s[9]||(s[9]=t("span",{class:"stat-label"},"P&L Total",-1)),t("span",{class:y(["stat-value",u.value.totalPnL>=0?"text-emerald-400":"text-red-400"])},l(u.value.totalPnL>=0?"+":"")+"$"+l(u.value.totalPnL.toFixed(2)),3)])]),t("div",Q,[t("div",X,[t("div",Y,[g(p(R),{class:"w-4 h-4"}),s[10]||(s[10]=t("span",{class:"text-sm font-medium"},"Filtres:",-1))]),h(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>o.value.period=e),onChange:w,class:"input-field w-auto py-2 px-3 text-sm"},[...s[11]||(s[11]=[t("option",{value:"all"},"Toutes les périodes",-1),t("option",{value:"today"},"Aujourd'hui",-1),t("option",{value:"week"},"Cette semaine",-1),t("option",{value:"month"},"Ce mois",-1)])],544),[[_,o.value.period]]),h(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>o.value.result=e),class:"input-field w-auto py-2 px-3 text-sm"},[...s[12]||(s[12]=[t("option",{value:"all"},"Tous les résultats",-1),t("option",{value:"win"},"Gagnants",-1),t("option",{value:"loss"},"Perdants",-1)])],512),[[_,o.value.result]]),h(t("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>o.value.symbol=e),class:"input-field w-auto py-2 px-3 text-sm"},[s[13]||(s[13]=t("option",{value:"all"},"Tous les symboles",-1)),(n(!0),d(T,null,L(C.value,e=>(n(),d("option",{key:e,value:e},l(e),9,Z))),128))],512),[[_,o.value.symbol]])])]),t("div",tt,[k.value?(n(),d("div",st," Chargement... ")):i.value.length===0?(n(),d("div",et,[g(p(P),{class:"w-12 h-12 mx-auto mb-3 opacity-50"}),s[14]||(s[14]=t("p",null,"Aucun trade trouvé",-1))])):(n(),d("div",at,[t("table",lt,[s[15]||(s[15]=t("thead",{class:"bg-dark-800/50 border-b border-dark-700"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-dark-400 uppercase"},"Date"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-dark-400 uppercase"},"Symbole"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-dark-400 uppercase"},"Direction"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-dark-400 uppercase"},"Entrée"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-dark-400 uppercase"},"Sortie"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-dark-400 uppercase"},"P&L")])],-1)),t("tbody",ot,[(n(!0),d(T,null,L(i.value,e=>{var c,r,x;return n(),d("tr",{key:e.id,class:"hover:bg-dark-800/30 transition-colors"},[t("td",nt,l(D(e.exitTime)),1),t("td",it,[t("span",rt,l(e.coin),1)]),t("td",dt,[t("span",{class:y([e.direction==="long"?"badge-success":"badge-danger","flex items-center gap-1 w-fit"])},[e.direction==="long"?(n(),F(p(B),{key:0,class:"w-3 h-3"})):(n(),F(p(H),{key:1,class:"w-3 h-3"})),b(" "+l(e.direction==="long"?"Long":"Short"),1)],2)]),t("td",ut," $"+l(((c=e.entryPrice)==null?void 0:c.toFixed(2))||"0.00"),1),t("td",pt," $"+l(((r=e.exitPrice)==null?void 0:r.toFixed(2))||"0.00"),1),t("td",ct,[t("span",{class:y([e.pnl>=0?"text-emerald-400":"text-red-400","font-mono font-semibold"])},l(e.pnl>=0?"+":"")+"$"+l(((x=e.pnl)==null?void 0:x.toFixed(2))||"0.00"),3)])])}),128))])])]))])]))}});export{gt as default};
