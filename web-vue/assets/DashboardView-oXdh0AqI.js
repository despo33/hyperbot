import{u as F,B as R}from"./bot-DINIEMYw.js";import{c as d,a as x}from"./createLucideIcon-C2Ny1EPG.js";import{d as T,r as v,j as H,k as $,l as N,c,a as t,e as l,u as a,m as w,n as E,p as k,q as p,h as g,t as n,F as P,s as j,o as i}from"./index-CkTTGbTf.js";import{T as D,H as O,a as W}from"./trending-up-B-prgq7W.js";import{S as U}from"./settings-DJ2sKoZp.js";/**
 * @license lucide-vue-next v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=d("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-vue-next v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=d("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-vue-next v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=d("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-vue-next v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=d("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-vue-next v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=d("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);/**
 * @license lucide-vue-next v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=d("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);/**
 * @license lucide-vue-next v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=d("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-vue-next v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=d("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-vue-next v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=d("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),tt={class:"min-h-screen flex"},et={class:"w-64 glass-card m-4 mr-0 p-4 flex flex-col"},st={class:"flex items-center gap-3 px-2 mb-8"},at={class:"w-10 h-10 bg-gradient-to-br from-primary-600 to-primary-400 rounded-xl flex items-center justify-center"},lt={class:"flex-1 space-y-1"},ot={class:"border-t border-dark-700 pt-4 mt-4"},nt={class:"flex-1 p-4 overflow-auto"},it={class:"flex items-center justify-between mb-6"},rt={class:"flex items-center gap-3"},dt={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},ct={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},ut={class:"stat-card"},ht={class:"flex items-center justify-between"},pt={class:"flex items-center gap-2"},xt={class:"stat-value text-xl"},vt={class:"stat-card"},yt={class:"flex items-center justify-between"},mt={class:"stat-value"},gt={class:"stat-card"},ft={class:"flex items-center justify-between"},bt={class:"stat-card"},wt={class:"flex items-center justify-between"},kt={class:"stat-value"},_t={class:"glass-card p-6"},Mt={class:"text-lg font-semibold text-white mb-4 flex items-center gap-2"},zt={key:0,class:"text-center py-12 text-dark-400"},St={key:1,class:"space-y-3"},Bt={class:"flex items-center gap-4"},Ct={class:"font-semibold text-white"},Ht={class:"text-sm text-dark-400"},Pt={class:"text-right"},jt={class:"text-sm text-dark-400"},Rt=T({__name:"DashboardView",setup(Dt){const A=F(),_=v(!0),f=v(null),u=v([]),M=v(null),y=v(null),h=H(()=>{var s;return(s=f.value)==null?void 0:s.isRunning}),m=H(()=>u.value.reduce((s,e)=>s+(e.unrealizedPnl||0),0));async function b(){try{const[s,e,r]=await Promise.all([x.get("/status"),x.get("/positions"),x.get("/account")]);f.value=s.data,u.value=e.data.positions||[],M.value=r.data}catch(s){console.error("Error fetching data:",s)}finally{_.value=!1}}async function V(){try{h.value?await x.post("/bot/stop"):await x.post("/bot/start"),await b()}catch(s){console.error("Error toggling bot:",s)}}function z(){const s=window.location.protocol==="https:"?"wss:":"ws:";y.value=new WebSocket(`${s}//${window.location.host}`),y.value.onmessage=e=>{try{const r=JSON.parse(e.data);r.type==="status"?f.value=r.data:r.type==="positions"&&(u.value=r.data||[])}catch{}},y.value.onclose=()=>{setTimeout(z,3e3)}}async function q(){await A.logout(),window.location.href="/login"}return $(()=>{b(),z()}),N(()=>{var s;(s=y.value)==null||s.close()}),(s,e)=>{var S;const r=E("router-link");return i(),c("div",tt,[t("aside",et,[t("div",st,[t("div",at,[l(a(R),{class:"w-5 h-5 text-white"})]),e[0]||(e[0]=t("div",null,[t("h1",{class:"font-bold text-white"},"HyperBot"),t("p",{class:"text-xs text-dark-400"},"Trading Bot")],-1))]),t("nav",lt,[l(r,{to:"/",class:"flex items-center gap-3 px-4 py-3 rounded-xl text-dark-300 hover:bg-dark-800/50 hover:text-white transition-all","active-class":"!bg-primary-600/20 !text-primary-400"},{default:w(()=>[l(a(G),{class:"w-5 h-5"}),e[1]||(e[1]=t("span",null,"Dashboard",-1))]),_:1}),l(r,{to:"/trades",class:"flex items-center gap-3 px-4 py-3 rounded-xl text-dark-300 hover:bg-dark-800/50 hover:text-white transition-all","active-class":"!bg-primary-600/20 !text-primary-400"},{default:w(()=>[l(a(O),{class:"w-5 h-5"}),e[2]||(e[2]=t("span",null,"Historique",-1))]),_:1}),l(r,{to:"/config",class:"flex items-center gap-3 px-4 py-3 rounded-xl text-dark-300 hover:bg-dark-800/50 hover:text-white transition-all","active-class":"!bg-primary-600/20 !text-primary-400"},{default:w(()=>[l(a(U),{class:"w-5 h-5"}),e[3]||(e[3]=t("span",null,"Configuration",-1))]),_:1})]),t("div",ot,[t("button",{onClick:q,class:"flex items-center gap-3 px-4 py-3 rounded-xl text-dark-400 hover:bg-red-500/10 hover:text-red-400 transition-all w-full"},[l(a(K),{class:"w-5 h-5"}),e[4]||(e[4]=t("span",null,"Déconnexion",-1))])])]),t("main",nt,[t("header",it,[e[6]||(e[6]=t("div",null,[t("h2",{class:"text-2xl font-bold text-white"},"Dashboard"),t("p",{class:"text-dark-400"},"Vue d'ensemble de votre trading")],-1)),t("div",rt,[t("button",{onClick:b,class:"btn-secondary flex items-center gap-2"},[l(a(X),{class:"w-4 h-4"}),e[5]||(e[5]=k(" Actualiser ",-1))]),t("button",{onClick:V,class:p([h.value?"btn-danger":"btn-success","flex items-center gap-2"])},[h.value?(i(),g(a(Y),{key:0,class:"w-4 h-4"})):(i(),g(a(Q),{key:1,class:"w-4 h-4"})),k(" "+n(h.value?"Arrêter":"Démarrer"),1)],2)])]),_.value?(i(),c("div",dt,[(i(),c(P,null,j(4,o=>t("div",{key:o,class:"stat-card"},[...e[7]||(e[7]=[t("div",{class:"skeleton h-4 w-20 mb-2"},null,-1),t("div",{class:"skeleton h-8 w-32"},null,-1)])])),64))])):(i(),c("div",ct,[t("div",ut,[t("div",ht,[e[8]||(e[8]=t("span",{class:"stat-label"},"Statut Bot",-1)),l(a(I),{class:"w-5 h-5 text-primary-400"})]),t("div",pt,[t("span",{class:p([h.value?"bg-emerald-500":"bg-dark-500","w-2 h-2 rounded-full"])},null,2),t("span",xt,n(h.value?"Actif":"Arrêté"),1)])]),t("div",vt,[t("div",yt,[e[9]||(e[9]=t("span",{class:"stat-label"},"Balance",-1)),l(a(Z),{class:"w-5 h-5 text-cyan-400"})]),t("span",mt,"$"+n((((S=M.value)==null?void 0:S.balance)||0).toFixed(2)),1)]),t("div",gt,[t("div",ft,[e[10]||(e[10]=t("span",{class:"stat-label"},"P&L Non réalisé",-1)),l(a(J),{class:p(["w-5 h-5",m.value>=0?"text-emerald-400":"text-red-400"])},null,8,["class"])]),t("span",{class:p(["stat-value",m.value>=0?"text-emerald-400":"text-red-400"])},n(m.value>=0?"+":"")+"$"+n(m.value.toFixed(2)),3)]),t("div",bt,[t("div",wt,[e[11]||(e[11]=t("span",{class:"stat-label"},"Positions",-1)),l(a(L),{class:"w-5 h-5 text-amber-400"})]),t("span",kt,n(u.value.length),1)])])),t("div",_t,[t("h3",Mt,[l(a(D),{class:"w-5 h-5 text-primary-400"}),e[12]||(e[12]=k(" Positions Ouvertes ",-1))]),u.value.length===0?(i(),c("div",zt,[l(a(L),{class:"w-12 h-12 mx-auto mb-3 opacity-50"}),e[13]||(e[13]=t("p",null,"Aucune position ouverte",-1))])):(i(),c("div",St,[(i(!0),c(P,null,j(u.value,o=>{var B,C;return i(),c("div",{key:o.symbol,class:"flex items-center justify-between p-4 bg-dark-800/50 rounded-xl border border-dark-700 hover:border-primary-500/30 transition-all"},[t("div",Bt,[t("div",{class:p([o.size>0?"bg-emerald-500/20 text-emerald-400":"bg-red-500/20 text-red-400","w-10 h-10 rounded-lg flex items-center justify-center"])},[o.size>0?(i(),g(a(D),{key:0,class:"w-5 h-5"})):(i(),g(a(W),{key:1,class:"w-5 h-5"}))],2),t("div",null,[t("p",Ct,n(o.symbol),1),t("p",Ht,n(o.size>0?"Long":"Short")+" · "+n(Math.abs(o.size).toFixed(4)),1)])]),t("div",Pt,[t("p",{class:p([o.unrealizedPnl>=0?"text-emerald-400":"text-red-400","font-mono font-semibold"])},n(o.unrealizedPnl>=0?"+":"")+"$"+n(((B=o.unrealizedPnl)==null?void 0:B.toFixed(2))||"0.00"),3),t("p",jt," Entry: $"+n((C=o.entryPrice)==null?void 0:C.toFixed(2)),1)])])}),128))]))])])])}}});export{Rt as default};
